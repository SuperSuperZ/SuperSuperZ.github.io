<!DOCTYPE html>
<html>

	<head>
		
<title>CentOS7杂记</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">


<meta name="keywords" content="Linux,CentOS,">
<meta name="description" content="">


<script src="/js/jquery.min.js"></script>


	<meta name="generator" content="Hexo 4.2.1"></head>

	<body>
		
<link rel="stylesheet" href="/css/page.css">


<link rel="stylesheet" href="/css/page_cente.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/header.css">

	<div class="header">
		<div class="header-top">
			<div class="h-left">
				SuperSuperZ
				<!-- <a href="/">
					<img src="">
				</a> -->
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>SuperSuperZ</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
</div>
<div class='shelter'
    style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'>
</div>
<style>
    .sidebar {
        width: 0;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        background: #fff;
        z-index: 999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815)
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $(function () { $('.h-right-close>svg').click(function () { $('.sidebar').animate({ width: "66%" }, 500); $('.shelter').fadeIn("slow") }); $('.shelter').click(function (e) { $('.sidebar').animate({ width: "0" }, 500); $('.shelter').fadeOut("slow") }) })
</script>
		<script>
			$(function () { $(window).scroll(function () { if ($(document).scrollTop() > 100) { $(".header-top").removeClass("header-move2"); $('.header-top').addClass('header-move1') } else { $(".header-top").removeClass("header-move1"); $('.header-top').addClass('header-move2') } }) });
		</script>
<div class="header-bg ">
    <div class="bg-content">
        <ul class="tag">
            
            
            <li><a href="/tags/Linux">Linux</a></li>
            
            <li><a href="/tags/CentOS">CentOS</a></li>
            
            
        </ul>
        <h1>CentOS7杂记</h1>
        <div class="article-info">
            <div class="article-author">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <g>
                        <path fill="#12183A"
                            d="M6.187 15.265A6.47 6.47 0 0 0 10 16.5a6.47 6.47 0 0 0 3.813-1.235A4.99 4.99 0 0 0 10 13.5a4.99 4.99 0 0 0-3.813 1.765zM5.082 14.25A6.485 6.485 0 0 1 10 12c1.965 0 3.726.872 4.918 2.25a6.5 6.5 0 1 0-9.836 0zM10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z">
                        </path>
                    </g>
                </svg>
                
                <span> <a href="">SuperSuperZ</a></span>
                <p>2021-03-20</p>
            </div>
        </div>
    </div>
</div>
<div class="article-content">
    <div id="article" class="content">
        <h3 id="一、-启用网络"><a href="#一、-启用网络" class="headerlink" title="一、 启用网络"></a>一、 启用网络</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">su root<br><span class="hljs-comment"># 进入网络配置文件所在的文件夹</span><br><span class="hljs-built_in">cd</span> /etc/sysconfig/network-scripts/ <br><span class="hljs-comment"># 设置开机启动</span><br>sed -i <span class="hljs-string">'s/ONBOOT=no/ONBOOT=yes/g'</span> ifcfg-enp0s3<br><span class="hljs-comment"># 查看配置</span><br>cat ifcfg-enp0s3<br><span class="hljs-comment"># 重启网络服务</span><br>service network restart<br></code></pre></td></tr></table></figure>



<h3 id="二、更换软件源"><a href="#二、更换软件源" class="headerlink" title="二、更换软件源"></a>二、更换软件源</h3><ol>
<li>手动换源</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /etc/yum.repos.d<br><span class="hljs-comment"># 备份</span><br>cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br><span class="hljs-comment"># 下载repo文件，并用其中一个替换</span><br>wget -O /etc/yum.repos.d http://mirrors.aliyun.com/repo/Centos-7.repo<br><span class="hljs-comment">#wget -O /etc/yum.repos.d http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><br><span class="hljs-comment"># 运行以下命令生成软件包信息缓存</span><br>yum clean all<br>yum makecache<br></code></pre></td></tr></table></figure>


<ol start="2">
<li>一键换源脚本</li>
</ol>
<ul>
<li>方法：<a href="https://www.oldking.net/697.html" target="_blank" rel="noopener">https://www.oldking.net/697.html</a></li>
<li>脚本：<a href="https://raw.githubusercontent.com/oooldking/script/master/superupdate.sh" target="_blank" rel="noopener">https://raw.githubusercontent.com/oooldking/script/master/superupdate.sh</a></li>
<li>命令：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 先安装所需工具</span><br>yum install -y wget &amp;&amp; yum install -y ca-certificates<br><span class="hljs-comment"># 下载脚本</span><br>wget  git.io/superupdate.sh<br><span class="hljs-comment"># 一键换源 默认是aliyun</span><br>bash superupdate.sh [aliyun]<br><span class="hljs-comment"># 一键还原配置</span><br>bash superupdate.sh restore<br></code></pre></td></tr></table></figure>



<h3 id="三、安装JDK"><a href="#三、安装JDK" class="headerlink" title="三、安装JDK"></a>三、安装JDK</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 搜索jdk</span><br>yum search java | grep -i --color jdk<br><span class="hljs-comment"># 安装jdk8</span><br>sudo yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel<br><br><span class="hljs-comment"># 在profile末尾追加环境变量JAVA_HOME、CLASSPATH、PATH （vim /etc/profile）</span><br><span class="hljs-built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.272.b10-1.el7_9.x86_64<br><span class="hljs-built_in">export</span> CLASSPATH=.:<span class="hljs-variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="hljs-variable">$JAVA_HOME</span>/lib/dt.jar:<span class="hljs-variable">$JAVA_HOME</span>/lib/tools.jar<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin<br><br><span class="hljs-comment"># 使环境变量生效</span><br><span class="hljs-built_in">source</span> /etc/profile<br></code></pre></td></tr></table></figure>



<h3 id="四、防火墙操作"><a href="#四、防火墙操作" class="headerlink" title="四、防火墙操作"></a>四、防火墙操作</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 防火墙服务</span><br>systemctl status firewalld.service                  //查看状态<br>systemctl start firewalld.service                   //启动<br>systemctl stop firewalld.service                    //停止<br>systemctl restart firewalld.service                 //重启<br>systemctl <span class="hljs-built_in">enable</span> firewalld.service                  //开机启动<br>systemctl <span class="hljs-built_in">disable</span> firewalld.service                 //关闭开机启动<br>systemctl is-enabled firewalld.service              //查看是否开机启动<br><br><span class="hljs-comment"># 基本操作</span><br>firewall-cmd --version                              //查看版本<br>firewall-cmd --state                                //查看状态<br>firewall-cmd --zone=public --list-ports             //查看所有打开的端口<br>firewall-cmd --reload                               //更新防火墙规则（设置端口后需要执行）<br><br><span class="hljs-comment"># 端口操作</span><br>firewall-cmd --permanent --zone=public --add-port=100-500/tcp     //开放端口段<br>firewall-cmd --zone=public --add-port=80/tcp --permanent          //开放80端口 --permanent永久生效<br>firewall-cmd --zone=public --query-port=80/tcp                    //查看某端口状态<br>firewall-cmd --zone=public --remove-port=80/tcp --permanent       //关闭端口<br></code></pre></td></tr></table></figure>


<h2 id="附"><a href="#附" class="headerlink" title="附"></a>附</h2><ol>
<li>CentOS-Base.repo</li>
</ol>
<figure class="highlight ini"><table><tr><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># CentOS-Base.repo</span><br><span class="hljs-section">[base]</span><br><span class="hljs-attr">name</span>=CentOS-<span class="hljs-variable">$releasever</span><br><span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">failovermethod</span>=priority<br><span class="hljs-attr">baseurl</span>=http://mirrors.cloud.aliyuncs.com/centos/<span class="hljs-variable">$releasever</span>/os/<span class="hljs-variable">$basearch</span>/<br><span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">gpgkey</span>=http://mirrors.cloud.aliyuncs.com/centos/RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br><span class="hljs-section">[updates]</span><br><span class="hljs-attr">name</span>=CentOS-<span class="hljs-variable">$releasever</span><br><span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">failovermethod</span>=priority<br><span class="hljs-attr">baseurl</span>=http://mirrors.cloud.aliyuncs.com/centos/<span class="hljs-variable">$releasever</span>/updates/<span class="hljs-variable">$basearch</span>/<br><span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">gpgkey</span>=http://mirrors.cloud.aliyuncs.com/centos/RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br><br><span class="hljs-section">[extras]</span><br><span class="hljs-attr">name</span>=CentOS-<span class="hljs-variable">$releasever</span><br><span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">failovermethod</span>=priority<br><span class="hljs-attr">baseurl</span>=http://mirrors.cloud.aliyuncs.com/centos/<span class="hljs-variable">$releasever</span>/extras/<span class="hljs-variable">$basearch</span>/<br><span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">gpgkey</span>=http://mirrors.cloud.aliyuncs.com/centos/RPM-GPG-KEY-CentOS-<span class="hljs-number">7</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>epel.repo</li>
</ol>
<figure class="highlight ini"><table><tr><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># epel.repo</span><br><span class="hljs-section">[epel]</span><br><span class="hljs-attr">name</span>=Extra Packages for Enterprise Linux <span class="hljs-number">7</span> - <span class="hljs-variable">$basearch</span><br><span class="hljs-attr">enabled</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">failovermethod</span>=priority<br><span class="hljs-attr">baseurl</span>=http://mirrors.cloud.aliyuncs.com/epel/<span class="hljs-number">7</span>/<span class="hljs-variable">$basearch</span><br><span class="hljs-attr">gpgcheck</span>=<span class="hljs-number">0</span><br><span class="hljs-attr">gpgkey</span>=http://mirrors.cloud.aliyuncs.com/epel/RPM-GPG-KEY-EPEL-<span class="hljs-number">7</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>一键换源脚本</li>
</ol>
<figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#更换源脚本superupdate.sh</span><br><span class="hljs-meta">#!/usr/bin/env bash</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Description: Choose a faster mirror for Linux script</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Copyright (C) 2017 - 2018 Oldking &lt;oooldking@gmail.com&gt;</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># URL: https://www.oldking.net/697.html</span><br><span class="hljs-comment">#</span><br><br>RED=<span class="hljs-string">'\033[0;31m'</span><br>GREEN=<span class="hljs-string">'\033[0;32m'</span><br>YELLOW=<span class="hljs-string">'\033[0;33m'</span><br>SKYBLUE=<span class="hljs-string">'\033[0;36m'</span><br>PLAIN=<span class="hljs-string">'\033[0m'</span><br><br><span class="hljs-function"><span class="hljs-title">getAbout</span></span>() &#123;<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" ========================================================= "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" \                 SuperUpdate.sh  Script                / "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" \            Choose a faster mirror for Linux           / "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" \                   Created by Oldking                  / "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" ========================================================= "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" Intro: https://www.oldking.net/697.html"</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" Copyright (C) 2018 Oldking oooldking@gmail.com"</span><br>	<span class="hljs-built_in">echo</span> -e <span class="hljs-string">" Version: <span class="hljs-variable">$&#123;GREEN&#125;</span>1.0.3<span class="hljs-variable">$&#123;PLAIN&#125;</span> (2 Nov 2018)"</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" Usage: wget -qO- git.io/superupdate.sh | bash"</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">getHelp</span></span>()&#123;<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" <span class="hljs-variable">$( bash superupdate.sh )</span>"</span><br>	ehco <span class="hljs-string">" - set sources from cdn-fastly "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" <span class="hljs-variable">$( bash superupdate.sh cn )</span> "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" - set sources from USTC "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" <span class="hljs-variable">$( bash superupdate.sh 163 )</span> "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" - set sources from 163.com "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" <span class="hljs-variable">$( bash superupdate.sh aliyun )</span> "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" - set sources from aliyun.com "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" <span class="hljs-variable">$( bash superupdate.sh aws )</span> "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" - set sources from cdn-aws "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" <span class="hljs-variable">$( bash superupdate.sh restore )</span> "</span><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">" - restore sources from backup file "</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">updateInit</span></span>()&#123;<br>	[[ <span class="hljs-variable">$EUID</span> -ne 0 ]] &amp;&amp; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">" <span class="hljs-variable">$&#123;RED&#125;</span>Error:<span class="hljs-variable">$&#123;PLAIN&#125;</span> This script must be run as root!"</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br><br>	<span class="hljs-keyword">if</span> [ -f /etc/redhat-release ]; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"centos"</span><br>	<span class="hljs-keyword">elif</span> cat /etc/issue | grep -Eqi <span class="hljs-string">"debian"</span>; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"debian"</span><br>	<span class="hljs-keyword">elif</span> cat /etc/issue | grep -Eqi <span class="hljs-string">"ubuntu"</span>; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"ubuntu"</span><br>	<span class="hljs-keyword">elif</span> cat /etc/issue | grep -Eqi <span class="hljs-string">"centos|red hat|redhat"</span>; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"centos"</span><br>	<span class="hljs-keyword">elif</span> cat /proc/version | grep -Eqi <span class="hljs-string">"debian"</span>; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"debian"</span><br>	<span class="hljs-keyword">elif</span> cat /proc/version | grep -Eqi <span class="hljs-string">"ubuntu"</span>; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"ubuntu"</span><br>	<span class="hljs-keyword">elif</span> cat /proc/version | grep -Eqi <span class="hljs-string">"centos|red hat|redhat"</span>; <span class="hljs-keyword">then</span><br>	    release=<span class="hljs-string">"centos"</span><br>	<span class="hljs-keyword">fi</span><br><br>	<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$release</span> == <span class="hljs-string">"debian"</span> ]; <span class="hljs-keyword">then</span><br>		debianVersion=$(awk -F<span class="hljs-string">'[= "]'</span> <span class="hljs-string">'/VERSION_ID/&#123;print $3&#125;'</span> /etc/os-release)<br>	<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$release</span> == <span class="hljs-string">"ubuntu"</span> ]; <span class="hljs-keyword">then</span><br>		ubuntuVersion=$(awk -F<span class="hljs-string">'[= "]'</span> <span class="hljs-string">'/VERSION_ID/&#123;print $3&#125;'</span> /etc/os-release)<br>	<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$release</span> == <span class="hljs-string">"centos"</span> ]; <span class="hljs-keyword">then</span><br>		os_release=$(grep <span class="hljs-string">"CentOS"</span> /etc/redhat-release 2&gt;/dev/null)<br>		<span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$os_release</span>"</span>|grep <span class="hljs-string">"release 5"</span> &gt;/dev/null 2&gt;&amp;1<br>		<span class="hljs-keyword">then</span><br>			centosVersion=5<br>		<span class="hljs-keyword">elif</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$os_release</span>"</span>|grep <span class="hljs-string">"release 6"</span> &gt;/dev/null 2&gt;&amp;1<br>		<span class="hljs-keyword">then</span><br>			centosVersion=6<br>		<span class="hljs-keyword">elif</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$os_release</span>"</span>|grep <span class="hljs-string">"release 7"</span> &gt;/dev/null 2&gt;&amp;1<br>		<span class="hljs-keyword">then</span><br>			centosVersion=7<br>		<span class="hljs-keyword">else</span><br>			centosVersion=<span class="hljs-string">""</span><br>		<span class="hljs-keyword">fi</span><br>	<span class="hljs-keyword">else</span><br>		<span class="hljs-built_in">echo</span> -e <span class="hljs-string">" <span class="hljs-variable">$&#123;RED&#125;</span>Error:<span class="hljs-variable">$&#123;PLAIN&#125;</span> This script can not be run in your system now!"</span> &amp;&amp; <span class="hljs-built_in">exit</span> 1<br>	<span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setDebian</span></span>()&#123;<br>	<span class="hljs-keyword">if</span> [[ -f /etc/apt/sources.list.bak ]]; <span class="hljs-keyword">then</span><br>		<span class="hljs-built_in">echo</span> -e <span class="hljs-string">" <span class="hljs-variable">$&#123;GREEN&#125;</span>sources.list.bak exists<span class="hljs-variable">$&#123;PLAIN&#125;</span>"</span><br>	<span class="hljs-keyword">else</span><br>		mv /etc/apt/sources.list&#123;,.bak&#125;<br>	<span class="hljs-keyword">fi</span><br><br>	[ -f /etc/apt/sources.list ] &amp;&amp; rm /etc/apt/sources.list<br>	<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://cdn-fastly.deb.debian.org/debian/ jessie main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://cdn-fastly.deb.debian.org/debian/ jessie-updates main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://cdn-fastly.deb.debian.org/debian/ jessie-backports main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://cdn-fastly.deb.debian.org/debian/ jessie main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://cdn-fastly.deb.debian.org/debian/ jessie-updates main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://cdn-fastly.deb.debian.org/debian/ jessie-backports main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://cdn-fastly.deb.debian.org/debian-security/ jessie/updates main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://cdn-fastly.deb.debian.org/debian-security/ jessie/updates main non-free contrib"</span> &gt;&gt;/etc/apt/sources.list<br><br>	[ <span class="hljs-string">"<span class="hljs-variable">$debianVersion</span>"</span> == <span class="hljs-string">'7'</span> ] &amp;&amp; sed -i <span class="hljs-string">'s/jessie/wheezy/'</span>g /etc/apt/sources.list<br>	[ <span class="hljs-string">"<span class="hljs-variable">$debianVersion</span>"</span> == <span class="hljs-string">'8'</span> ] &amp;&amp; <span class="hljs-built_in">echo</span> -n <span class="hljs-string">""</span><br>	[ <span class="hljs-string">"<span class="hljs-variable">$debianVersion</span>"</span> == <span class="hljs-string">'9'</span> ] &amp;&amp; sed -i <span class="hljs-string">'s/jessie/stretch/'</span>g /etc/apt/sources.list<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setUbuntu</span></span>()&#123;<br>	<span class="hljs-keyword">if</span> [[ -f /etc/apt/sources.list.bak ]]; <span class="hljs-keyword">then</span><br>		<span class="hljs-built_in">echo</span> -e <span class="hljs-string">" <span class="hljs-variable">$&#123;GREEN&#125;</span>sources.list.bak exists<span class="hljs-variable">$&#123;PLAIN&#125;</span>"</span><br>	<span class="hljs-keyword">else</span><br>		mv /etc/apt/sources.list&#123;,.bak&#125;<br>	<span class="hljs-keyword">fi</span><br><br>	[ -f /etc/apt/sources.list ] &amp;&amp; rm /etc/apt/sources.list<br><br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br>	<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse"</span> &gt;&gt;/etc/apt/sources.list<br><br>	[ <span class="hljs-string">"<span class="hljs-variable">$ubuntuVersion</span>"</span> == <span class="hljs-string">'14.04'</span> ] &amp;&amp; sed -i <span class="hljs-string">'s/xenial/trusty/'</span>g /etc/apt/sources.list<br>	[ <span class="hljs-string">"<span class="hljs-variable">$ubuntuVersion</span>"</span> == <span class="hljs-string">'16.06'</span> ] &amp;&amp; <span class="hljs-built_in">echo</span> -n <span class="hljs-string">""</span><br>	[ <span class="hljs-string">"<span class="hljs-variable">$ubuntuVersion</span>"</span> == <span class="hljs-string">'18.04'</span> ] &amp;&amp; sed -i <span class="hljs-string">'s/xenial/bionic/'</span>g /etc/apt/sources.list<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setCentos</span></span>()&#123;<br>	<span class="hljs-keyword">if</span> [ -f /etc/yum.repos.d/CentOS-Base.repo.bak ]; <span class="hljs-keyword">then</span><br>		<span class="hljs-built_in">echo</span> -e <span class="hljs-string">" <span class="hljs-variable">$&#123;GREEN&#125;</span>CentOS-Base.repo.bak exists<span class="hljs-variable">$&#123;PLAIN&#125;</span>"</span><br>	<span class="hljs-keyword">else</span><br>		mv /etc/yum.repos.d/CentOS-Base.repo&#123;,.bak&#125;<br>	<span class="hljs-keyword">fi</span><br><br>	[ -f /etc/yum.repos.d/CentOS-Base.repo ] &amp;&amp; rm /etc/yum.repos.d/CentOS-Base.repo<br><br>	[ <span class="hljs-string">"<span class="hljs-variable">$centosVersion</span>"</span> == <span class="hljs-string">'5'</span> ] &amp;&amp; wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-5.repo<br>	[ <span class="hljs-string">"<span class="hljs-variable">$centosVersion</span>"</span> == <span class="hljs-string">'6'</span> ] &amp;&amp; wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo<br>	[ <span class="hljs-string">"<span class="hljs-variable">$centosVersion</span>"</span> == <span class="hljs-string">'7'</span> ] &amp;&amp; wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setAWS</span></span>()&#123;<br>	sed -i <span class="hljs-string">'s/cdn-fastly.deb.debian.org/cdn-aws.deb.debian.org/'</span>g /etc/apt/sources.list<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setCn</span></span>()&#123;<br>	sed -i <span class="hljs-string">'s/cdn-fastly.deb.debian.org/mirrors.ustc.edu.cn/'</span>g /etc/apt/sources.list<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">set163</span></span>()&#123;<br>	sed -i <span class="hljs-string">'s/cdn-fastly.deb.debian.org/mirrors.163.com/'</span>g /etc/apt/sources.list<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setAliyun</span></span>()&#123;<br>	sed -i <span class="hljs-string">'s/cdn-fastly.deb.debian.org/mirrors.aliyun.com/'</span>g /etc/apt/sources.list<br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">restore</span></span>()&#123;<br>	<span class="hljs-keyword">if</span> [ -f /etc/apt/sources.list.bak ]; <span class="hljs-keyword">then</span><br>		rm /etc/apt/sources.list<br>		mv /etc/apt/sources.list.bak /etc/apt/sources.list<br>	<span class="hljs-keyword">elif</span> [ -f /etc/yum.repos.d/CentOS-Base.repo.bak ]; <span class="hljs-keyword">then</span><br>		rm /etc/yum.repos.d/CentOS-Base.repo<br>		mv /etc/yum.repos.d/CentOS-Base.repo.bak /etc/yum.repos.d/CentOS-Base.repo<br>	<span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-title">setSources</span></span>()&#123;<br>	getAbout<br>	updateInit<br>	<span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$release</span>"</span> <span class="hljs-keyword">in</span><br>		debian)<br>			<span class="hljs-keyword">case</span> <span class="hljs-variable">$para</span> <span class="hljs-keyword">in</span><br>				<span class="hljs-string">'fastly'</span>|<span class="hljs-string">'-fastly'</span>|<span class="hljs-string">'--fastly'</span> )<br>					setDebian;;<br>			    <span class="hljs-string">'cn'</span>|<span class="hljs-string">'-cn'</span>|<span class="hljs-string">'--cn'</span> )<br>					setDebian;setCn;;<br>			   	<span class="hljs-string">'163'</span>|<span class="hljs-string">'-163'</span>|<span class="hljs-string">'--163'</span> )<br>					setDebian;set163;;<br>				<span class="hljs-string">'aliyun'</span>|<span class="hljs-string">'-aliyun'</span>|<span class="hljs-string">'--aliyun'</span> )<br>					setDebian;setAliyun;;<br>				<span class="hljs-string">'aws'</span>|<span class="hljs-string">'-aws'</span>|<span class="hljs-string">'--aws'</span> )<br>					setDebian;setAWS;;<br>				<span class="hljs-string">'restore'</span>|<span class="hljs-string">'-restore'</span>|<span class="hljs-string">'--restore'</span> )<br>					restore;;<br>			*)<br>			setDebian;;<br>			<span class="hljs-keyword">esac</span><br>			apt-get update;;<br>		ubuntu)<br>			<span class="hljs-keyword">case</span> <span class="hljs-variable">$para</span> <span class="hljs-keyword">in</span><br>				<span class="hljs-string">'restore'</span>|<span class="hljs-string">'-restore'</span>|<span class="hljs-string">'--restore'</span> )<br>					restore;;<br>			*)<br>			setUbuntu;<br>			<span class="hljs-keyword">esac</span><br>			apt-get update;;<br>		centos)<br>			<span class="hljs-keyword">case</span> <span class="hljs-variable">$para</span> <span class="hljs-keyword">in</span><br>				<span class="hljs-string">'restore'</span>|<span class="hljs-string">'-restore'</span>|<span class="hljs-string">'--restore'</span> )<br>					restore;;<br>			*)<br>			setCentos;<br>			<span class="hljs-keyword">esac</span><br>			yum makecache;;<br>	<span class="hljs-keyword">esac</span><br>&#125;<br><br>para=<span class="hljs-variable">$1</span><br>setSources<br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">$&#123;GREEN&#125;</span>Done<span class="hljs-variable">$&#123;PLAIN&#125;</span>"</span><br></code></pre></td></tr></table></figure>
    </div>
</div>
<style>
    #noneimg img {
        display: none;
        z-index: 109;
        width: 600px !important;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            width: 88%
        }
    }
</style>
<script>
    $(function () {
        $('#article').click(function (e) {
            if (e.target.tagName == "IMG") {
                if ($('#nonediv').length == 0) {
                    let MImg = `<div id='noneimg'><img src='${e.target.currentSrc}'></div>`;
                    let MDiv =
                        "<div id='nonediv' style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'></div>";
                    $('#article').append(MDiv);
                    $('#article').append(MImg);
                    $("#nonediv").fadeIn("slow");
                    $("#noneimg img").fadeIn("slow")
                }
            } else {
                if ($('#nonediv').length !== 0) {
                    $("#noneimg ").fadeOut("slow");
                    $("#nonediv").fadeOut("slow");
                    setTimeout(function () {
                        $('#nonediv').remove();
                        $('#noneimg').remove()
                    }, 500)
                }
            }
        });
        $('.article-content').addClass('content-move')
    });
</script>
<div class="Last-Next">
    
    <a href="/2021/03/22/2021-03-22%20Frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%90%AD%E5%BB%BA/">
        <div class="last">
            <span>上一篇</span>
            <p>Frp内网穿透搭建</p>
        </div>
    </a>
    

    
    <a href="/2020/06/21/2020-06-21-java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BStream/">
        <div class="next">
            <span>下一篇</span>
            <p>java8新特性之Stream</p>
        </div>
    </a>
    
</div>
		
<link rel="stylesheet" href="/css/food.css">

<div class="footer">
	<div class="Copyright">
		©2021 By SuperSuperZ. 改自主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			href="https://github.com/qiaobug/hexo-theme-quiet">Quiet</a>
	</div>
</div>

<script src="/js/jquery.min.js"></script>


<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: block;
            border-radius: 50%;
            width: 66px;
            height: 66px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            border: 1px solid rgba(18, 24, 58, 0.06);

            transition: border .5s;
            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 30px;
            height: 30px;
            margin-top: 17.5px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $('#js-go_top').gotoTop({ offset: 500, speed: 300, animationShow: { 'transform': 'translate(0,0)', 'transition': 'transform .5s ease-in-out' }, animationHide: { 'transform': 'translate(100px,0)', 'transition': 'transform .5s ease-in-out' } });
</script>
<script>
	console.log('\n %c 改自Hexo-Quiet 主题 %c https://github.com/QiaoBug/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>

</html>